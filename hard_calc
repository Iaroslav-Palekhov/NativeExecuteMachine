CONST title -> [0x00000]
CONST operator -> [0x00001]
CONST firstSum -> [0x00002]
CONST twoSum -> [0x00003]
CONST firstDiv -> [0x00004]
CONST twoDiv -> [0x00005]
CONST firstMin -> [0x00006]
CONST twoMin -> [0x00007]
CONST firstMul -> [0x00008]
CONST twoMul -> [0x00009]
CONST summa -> [0x00010]
CONST chastnoe -> [0x00011]
CONST raznost -> [0x00012]
CONST proizvedenie -> [0x00013]
CONST error -> [0x00014]


BEGIN START
    MOV [title] Калькулятор на Native Execute Machine
    MOV [operator] Введите номер оператора (0 +. 1 -. 2 *. 3 /. 4 остановить программу.): 
    MOV [firstSum] Введите первое слагаемое число: ; плюсование
    MOV [twoSum] Введите второе слагаемое число: 
    MOV [firstDiv] Введите делимое число:          ; деление
    MOV [twoDiv] Введите делитель: 
    MOV [firstMin] Введите уменьшаемое число:      ; минусование
    MOV [twoMin] Введите вычитаемое число: 
    MOV [firstMul] Введите первый множитель:       ; умножение
    MOV [twoMul] Введите второй множитель: 
    MOV [summa] Сумма:                              
    MOV [chastnoe] Частное: 
    MOV [raznost] Разность: 
    MOV [proizvedenie] Произведение: 
    MOV [error] На ноль делить нельзя!          ; ошибка

    WAIT        ; Подождать секунду ( для демонстрации )
    PRT [title]  
END ; конец метки

; Программа автоматически переходит к следующей метке

BEGIN CALCULATE_UI     ; объявление метки CALCULATE 
    NXT                     ; Новая строка
    PRT [operator] 
    INP R1                  ; Запрашиваем оператор и записываем его в регистр R1
    IFZ R1 CALC_PLUS        ; Если регистр R1 равен нулю, то прыгаем на метку CALC_PLUS
    SUB R1 1           
    IFZ R1 CALC_MINUS       ; Если регистр R1 равен нулю, то прыгаем на метку CALC_MINUS
    SUB R1 1
    IFZ R1 CALC_MULTIPLY    ; Если регистр R1 равен нулю, то прыгаем на метку CALC_MULTIPLY
    SUB R1 1
    IFZ R1 CALC_DIVIDE      ; Если регистр R1 равен нулю, то прыгаем на метку CALC_DIVIDE
    SUB R1 1
    IFZ R1 FINISH           ; Если регистр R1 равен нулю, то прыгаем на инструкцию HLT 
END

BEGIN CALC_PLUS
    CLS         ; Очистка экрана
    PRT [firstSum]
    INP R2      ; Запрашиваем первое число и записываем его в регистр R2
    PRT [twoSum]
    INP R3      ; Запрашиваем второе число и записываем его в регистр R3
    ADD R2 R3   ; Прибавим к регистру R2 значение регистра R3
    PRT [summa]
    PRT R2      ; Вывести значение регистра R2
    NXT         ; Новая строка
    JMP CALCULATE_UI    ; Перепрыгнуть на метку CALCULATE_UI
END 

BEGIN CALC_MINUS
    CLS         ; Очистка экрана
    PRT [firstMin]
    INP R2      ; Запрашиваем первое число и записываем его в регистр R2
    PRT [twoMin]
    INP R3      ; Запрашиваем второе число и записываем его в регистр R3
    SUB R2 R3   ; Убавим от регистра R2 значение регистра R3
    PRT [raznost]
    PRT R2      ; Вывести значение регистра R2
    NXT         ; Новая строка
    JMP CALCULATE_UI    ; Перепрыгнуть на метку CALCULATE_UI
END 

BEGIN CALC_MULTIPLY
    CLS         ; Очистка экрана
    PRT [firstMul]
    INP R2      ; Запрашиваем первое число и записываем его в регистр R2
    PRT [twoMul]
    INP R3      ; Запрашиваем второе число и записываем его в регистр R3
    MUL R2 R3   ; Умножим регистр R2 на значение регистра R3
    PRT [proizvedenie]
    PRT R2      ; Вывести значение регистра R2
    NXT         ; Новая строка
    JMP CALCULATE_UI    ; Перепрыгнуть на метку CALCULATE_UI
END 

BEGIN CALC_DIVIDE
    CLS         ; Очистка экрана
    PRT [firstDiv]
    INP R2      ; Запрашиваем первое число и записываем его в регистр R2
    PRT [twoDiv]
    INP R3      ; Запрашиваем второе число и записываем его в регистр R3
    DIV R2 R3   ; Поделим регистр R2 на значение регистра R3
    PRT [chastnoe]
    PRT R2      ; Вывести значение регистра R2
    NXT         ; Новая строка
    JMP CALCULATE_UI    ; Перепрыгнуть на метку CALCULATE_UI
END 

BEGIN FINISH    ; обнуляем регистры, адреса и останавливаем программу
    MOV R1 0
    MOV R2 0
    MOV R3 0
    REM ALL
    HLT 
END
